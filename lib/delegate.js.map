{"version":3,"file":"delegate.js","sources":["../src-js/constants.js","../src-js/utils.js","../src-js/validation.js","../src-js/props.js","../src-js/addons/delegate.js"],"sourcesContent":["export const ROUND_ARROW = '<svg width=\"16\" height=\"6\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z\"></svg>';\nexport const BOX_CLASS = `__NAMESPACE_PREFIX__-box`;\nexport const CONTENT_CLASS = `__NAMESPACE_PREFIX__-content`;\nexport const BACKDROP_CLASS = `__NAMESPACE_PREFIX__-backdrop`;\nexport const ARROW_CLASS = `__NAMESPACE_PREFIX__-arrow`;\nexport const SVG_ARROW_CLASS = `__NAMESPACE_PREFIX__-svg-arrow`;\nexport const TOUCH_OPTIONS = { passive: true, capture: true };\nexport const TIPPY_DEFAULT_APPEND_TO = () => document.body;\n","export function hasOwnProperty(obj, key) {\n    return {}.hasOwnProperty.call(obj, key);\n}\nexport function getValueAtIndexOrReturn(value, index, defaultValue) {\n    if (Array.isArray(value)) {\n        const v = value[index];\n        return v == null\n            ? Array.isArray(defaultValue)\n                ? defaultValue[index]\n                : defaultValue\n            : v;\n    }\n    return value;\n}\nexport function isType(value, type) {\n    const str = {}.toString.call(value);\n    return str.indexOf('[object') === 0 && str.indexOf(`${type}]`) > -1;\n}\nexport function invokeWithArgsOrReturn(value, args) {\n    return typeof value === 'function' ? value(...args) : value;\n}\nexport function debounce(fn, ms) {\n    // Avoid wrapping in `setTimeout` if ms is 0 anyway\n    if (ms === 0) {\n        return fn;\n    }\n    let timeout;\n    return (arg) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            fn(arg);\n        }, ms);\n    };\n}\nexport function removeProperties(obj, keys) {\n    const clone = Object.assign({}, obj);\n    keys.forEach((key) => {\n        delete clone[key];\n    });\n    return clone;\n}\nexport function splitBySpaces(value) {\n    return value.split(/\\s+/).filter(Boolean);\n}\nexport function normalizeToArray(value) {\n    return [].concat(value);\n}\nexport function pushIfUnique(arr, value) {\n    if (arr.indexOf(value) === -1) {\n        arr.push(value);\n    }\n}\nexport function appendPxIfNumber(value) {\n    return typeof value === 'number' ? `${value}px` : value;\n}\nexport function unique(arr) {\n    return arr.filter((item, index) => arr.indexOf(item) === index);\n}\nexport function getNumber(value) {\n    return typeof value === 'number' ? value : parseFloat(value);\n}\nexport function getBasePlacement(placement) {\n    return placement.split('-')[0];\n}\nexport function arrayFrom(value) {\n    return [].slice.call(value);\n}\nexport function removeUndefinedProps(obj) {\n    return Object.keys(obj).reduce((acc, key) => {\n        if (obj[key] !== undefined) {\n            acc[key] = obj[key];\n        }\n        return acc;\n    }, {});\n}\n","export function createMemoryLeakWarning(method) {\n    const txt = method === 'destroy' ? 'n already-' : ' ';\n    return [\n        `${method}() was called on a${txt}destroyed instance. This is a no-op but`,\n        'indicates a potential memory leak.',\n    ].join(' ');\n}\nexport function clean(value) {\n    const spacesAndTabs = /[ \\t]{2,}/g;\n    const lineStartWithSpaces = /^[ \\t]*/gm;\n    return value\n        .replace(spacesAndTabs, ' ')\n        .replace(lineStartWithSpaces, '')\n        .trim();\n}\nfunction getDevMessage(message) {\n    return clean(`\n  %ctippy.js\n\n  %c${clean(message)}\n\n  %c👷‍ This is a development-only message. It will be removed in production.\n  `);\n}\nexport function getFormattedMessage(message) {\n    return [\n        getDevMessage(message),\n        // title\n        'color: #00C584; font-size: 1.3em; font-weight: bold;',\n        // message\n        'line-height: 1.5',\n        // footer\n        'color: #a6a095;',\n    ];\n}\n// Assume warnings and errors never have the same message\nlet visitedMessages;\nif (__DEV__) {\n    resetVisitedMessages();\n}\nexport function resetVisitedMessages() {\n    visitedMessages = new Set();\n}\nexport function warnWhen(condition, message) {\n    if (condition && !visitedMessages.has(message)) {\n        visitedMessages.add(message);\n        console.warn(...getFormattedMessage(message));\n    }\n}\nexport function errorWhen(condition, message) {\n    if (condition && !visitedMessages.has(message)) {\n        visitedMessages.add(message);\n        console.error(...getFormattedMessage(message));\n    }\n}\nexport function validateTargets(targets) {\n    const didPassFalsyValue = !targets;\n    const didPassPlainObject = Object.prototype.toString.call(targets) === '[object Object]' &&\n        !targets.addEventListener;\n    errorWhen(didPassFalsyValue, [\n        'tippy() was passed',\n        '`' + String(targets) + '`',\n        'as its targets (first) argument. Valid types are: String, Element,',\n        'Element[], or NodeList.',\n    ].join(' '));\n    errorWhen(didPassPlainObject, [\n        'tippy() was passed a plain object which is not supported as an argument',\n        'for virtual positioning. Use props.getReferenceClientRect instead.',\n    ].join(' '));\n}\n","import { hasOwnProperty, removeProperties, invokeWithArgsOrReturn, } from './utils';\nimport { warnWhen } from './validation';\nimport { TIPPY_DEFAULT_APPEND_TO } from './constants';\nconst pluginProps = {\n    animateFill: false,\n    followCursor: false,\n    inlinePositioning: false,\n    sticky: false,\n};\nconst renderProps = {\n    allowHTML: false,\n    animation: 'fade',\n    arrow: true,\n    content: '',\n    inertia: false,\n    maxWidth: 350,\n    role: 'tooltip',\n    theme: '',\n    zIndex: 9999,\n};\nexport const defaultProps = Object.assign(Object.assign({ appendTo: TIPPY_DEFAULT_APPEND_TO, aria: {\n        content: 'auto',\n        expanded: 'auto',\n    }, delay: 0, duration: [300, 250], getReferenceClientRect: null, hideOnClick: true, ignoreAttributes: false, interactive: false, interactiveBorder: 2, interactiveDebounce: 0, moveTransition: '', offset: [0, 10], onAfterUpdate() { },\n    onBeforeUpdate() { },\n    onCreate() { },\n    onDestroy() { },\n    onHidden() { },\n    onHide() { },\n    onMount() { },\n    onShow() { },\n    onShown() { },\n    onTrigger() { },\n    onUntrigger() { },\n    onClickOutside() { }, placement: 'top', plugins: [], popperOptions: {}, render: null, showOnCreate: false, touch: true, trigger: 'mouseenter focus', triggerTarget: null }, pluginProps), renderProps);\nconst defaultKeys = Object.keys(defaultProps);\nexport const setDefaultProps = (partialProps) => {\n    /* istanbul ignore else */\n    if (__DEV__) {\n        validateProps(partialProps, []);\n    }\n    const keys = Object.keys(partialProps);\n    keys.forEach((key) => {\n        defaultProps[key] = partialProps[key];\n    });\n};\nexport function getExtendedPassedProps(passedProps) {\n    const plugins = passedProps.plugins || [];\n    const pluginProps = plugins.reduce((acc, plugin) => {\n        var _a;\n        const { name, defaultValue } = plugin;\n        if (name) {\n            acc[name] =\n                passedProps[name] !== undefined\n                    ? passedProps[name]\n                    : (_a = defaultProps[name]) !== null && _a !== void 0 ? _a : defaultValue;\n        }\n        return acc;\n    }, {});\n    return Object.assign(Object.assign({}, passedProps), pluginProps);\n}\nexport function getDataAttributeProps(reference, plugins) {\n    const propKeys = plugins\n        ? Object.keys(getExtendedPassedProps(Object.assign(Object.assign({}, defaultProps), { plugins })))\n        : defaultKeys;\n    const props = propKeys.reduce((acc, key) => {\n        const valueAsString = (reference.getAttribute(`data-tippy-${key}`) || '').trim();\n        if (!valueAsString) {\n            return acc;\n        }\n        if (key === 'content') {\n            acc[key] = valueAsString;\n        }\n        else {\n            try {\n                acc[key] = JSON.parse(valueAsString);\n            }\n            catch (e) {\n                acc[key] = valueAsString;\n            }\n        }\n        return acc;\n    }, {});\n    return props;\n}\nexport function evaluateProps(reference, props) {\n    const out = Object.assign(Object.assign(Object.assign({}, props), { content: invokeWithArgsOrReturn(props.content, [reference]) }), (props.ignoreAttributes\n        ? {}\n        : getDataAttributeProps(reference, props.plugins)));\n    out.aria = Object.assign(Object.assign({}, defaultProps.aria), out.aria);\n    out.aria = {\n        expanded: out.aria.expanded === 'auto' ? props.interactive : out.aria.expanded,\n        content: out.aria.content === 'auto'\n            ? props.interactive\n                ? null\n                : 'describedby'\n            : out.aria.content,\n    };\n    return out;\n}\nexport function validateProps(partialProps = {}, plugins = []) {\n    const keys = Object.keys(partialProps);\n    keys.forEach((prop) => {\n        const nonPluginProps = removeProperties(defaultProps, Object.keys(pluginProps));\n        let didPassUnknownProp = !hasOwnProperty(nonPluginProps, prop);\n        // Check if the prop exists in `plugins`\n        if (didPassUnknownProp) {\n            didPassUnknownProp =\n                plugins.filter((plugin) => plugin.name === prop).length === 0;\n        }\n        warnWhen(didPassUnknownProp, [\n            `\\`${prop}\\``,\n            \"is not a valid prop. You may have spelled it incorrectly, or if it's\",\n            'a plugin, forgot to pass it in an array as props.plugins.',\n            '\\n\\n',\n            'All props: https://atomiks.github.io/tippyjs/v6/all-props/\\n',\n            'Plugins: https://atomiks.github.io/tippyjs/v6/plugins/',\n        ].join(' '));\n    });\n}\n","import tippy from '..';\nimport { TOUCH_OPTIONS } from '../constants';\nimport { defaultProps } from '../props';\nimport { normalizeToArray, removeProperties } from '../utils';\nimport { errorWhen } from '../validation';\nconst BUBBLING_EVENTS_MAP = {\n    mouseover: 'mouseenter',\n    focusin: 'focus',\n    click: 'click',\n};\n/**\n * Creates a delegate instance that controls the creation of tippy instances\n * for child elements (`target` CSS selector).\n */\nfunction delegate(targets, props) {\n    /* istanbul ignore else */\n    if (__DEV__) {\n        errorWhen(!(props && props.target), [\n            'You must specity a `target` prop indicating a CSS selector string matching',\n            'the target elements that should receive a tippy.',\n        ].join(' '));\n    }\n    let listeners = [];\n    let childTippyInstances = [];\n    let disabled = false;\n    const { target } = props;\n    const nativeProps = removeProperties(props, ['target']);\n    const parentProps = Object.assign(Object.assign({}, nativeProps), { trigger: 'manual', touch: false });\n    const childProps = Object.assign(Object.assign({ touch: defaultProps.touch }, nativeProps), { showOnCreate: true });\n    const returnValue = tippy(targets, parentProps);\n    const normalizedReturnValue = normalizeToArray(returnValue);\n    function onTrigger(event) {\n        if (!event.target || disabled) {\n            return;\n        }\n        const targetNode = event.target.closest(target);\n        if (!targetNode) {\n            return;\n        }\n        // Get relevant trigger with fallbacks:\n        // 1. Check `data-tippy-trigger` attribute on target node\n        // 2. Fallback to `trigger` passed to `delegate()`\n        // 3. Fallback to `defaultProps.trigger`\n        const trigger = targetNode.getAttribute('data-tippy-trigger') ||\n            props.trigger ||\n            defaultProps.trigger;\n        // @ts-ignore\n        if (targetNode._tippy) {\n            return;\n        }\n        if (event.type === 'touchstart' && typeof childProps.touch === 'boolean') {\n            return;\n        }\n        if (event.type !== 'touchstart' &&\n            trigger.indexOf(BUBBLING_EVENTS_MAP[event.type]) < 0) {\n            return;\n        }\n        const instance = tippy(targetNode, childProps);\n        if (instance) {\n            childTippyInstances = childTippyInstances.concat(instance);\n        }\n    }\n    function on(node, eventType, handler, options = false) {\n        node.addEventListener(eventType, handler, options);\n        listeners.push({ node, eventType, handler, options });\n    }\n    function addEventListeners(instance) {\n        const { reference } = instance;\n        on(reference, 'touchstart', onTrigger, TOUCH_OPTIONS);\n        on(reference, 'mouseover', onTrigger);\n        on(reference, 'focusin', onTrigger);\n        on(reference, 'click', onTrigger);\n    }\n    function removeEventListeners() {\n        listeners.forEach(({ node, eventType, handler, options }) => {\n            node.removeEventListener(eventType, handler, options);\n        });\n        listeners = [];\n    }\n    function applyMutations(instance) {\n        const originalDestroy = instance.destroy;\n        const originalEnable = instance.enable;\n        const originalDisable = instance.disable;\n        instance.destroy = (shouldDestroyChildInstances = true) => {\n            if (shouldDestroyChildInstances) {\n                childTippyInstances.forEach((instance) => {\n                    instance.destroy();\n                });\n            }\n            childTippyInstances = [];\n            removeEventListeners();\n            originalDestroy();\n        };\n        instance.enable = () => {\n            originalEnable();\n            childTippyInstances.forEach((instance) => instance.enable());\n            disabled = false;\n        };\n        instance.disable = () => {\n            originalDisable();\n            childTippyInstances.forEach((instance) => instance.disable());\n            disabled = true;\n        };\n        addEventListeners(instance);\n    }\n    normalizedReturnValue.forEach(applyMutations);\n    return returnValue;\n}\nexport default delegate;\n"],"names":["TOUCH_OPTIONS","passive","capture","TIPPY_DEFAULT_APPEND_TO","document","body","removeProperties","obj","keys","clone","Object","assign","forEach","key","normalizeToArray","value","concat","clean","spacesAndTabs","lineStartWithSpaces","replace","trim","getDevMessage","message","getFormattedMessage","visitedMessages","resetVisitedMessages","Set","errorWhen","condition","has","add","console","error","pluginProps","animateFill","followCursor","inlinePositioning","sticky","renderProps","allowHTML","animation","arrow","content","inertia","maxWidth","role","theme","zIndex","defaultProps","appendTo","aria","expanded","delay","duration","getReferenceClientRect","hideOnClick","ignoreAttributes","interactive","interactiveBorder","interactiveDebounce","moveTransition","offset","onAfterUpdate","onBeforeUpdate","onCreate","onDestroy","onHidden","onHide","onMount","onShow","onShown","onTrigger","onUntrigger","onClickOutside","placement","plugins","popperOptions","render","showOnCreate","touch","trigger","triggerTarget","BUBBLING_EVENTS_MAP","mouseover","focusin","click","delegate","targets","props","target","join","listeners","childTippyInstances","disabled","nativeProps","parentProps","childProps","returnValue","tippy","normalizedReturnValue","event","targetNode","closest","getAttribute","_tippy","type","indexOf","instance","on","node","eventType","handler","options","addEventListener","push","addEventListeners","reference","removeEventListeners","removeEventListener","applyMutations","originalDestroy","destroy","originalEnable","enable","originalDisable","disable","shouldDestroyChildInstances"],"mappings":"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"}