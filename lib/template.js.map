{"version":3,"file":"template.js","sources":["../src-js/constants.js","../src-js/utils.js","../src-js/dom-utils.js","../src-js/template.js"],"sourcesContent":["export const ROUND_ARROW = '<svg width=\"16\" height=\"6\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z\"></svg>';\nexport const BOX_CLASS = `__NAMESPACE_PREFIX__-box`;\nexport const CONTENT_CLASS = `__NAMESPACE_PREFIX__-content`;\nexport const BACKDROP_CLASS = `__NAMESPACE_PREFIX__-backdrop`;\nexport const ARROW_CLASS = `__NAMESPACE_PREFIX__-arrow`;\nexport const SVG_ARROW_CLASS = `__NAMESPACE_PREFIX__-svg-arrow`;\nexport const TOUCH_OPTIONS = { passive: true, capture: true };\nexport const TIPPY_DEFAULT_APPEND_TO = () => document.body;\n","export function hasOwnProperty(obj, key) {\n    return {}.hasOwnProperty.call(obj, key);\n}\nexport function getValueAtIndexOrReturn(value, index, defaultValue) {\n    if (Array.isArray(value)) {\n        const v = value[index];\n        return v == null\n            ? Array.isArray(defaultValue)\n                ? defaultValue[index]\n                : defaultValue\n            : v;\n    }\n    return value;\n}\nexport function isType(value, type) {\n    const str = {}.toString.call(value);\n    return str.indexOf('[object') === 0 && str.indexOf(`${type}]`) > -1;\n}\nexport function invokeWithArgsOrReturn(value, args) {\n    return typeof value === 'function' ? value(...args) : value;\n}\nexport function debounce(fn, ms) {\n    // Avoid wrapping in `setTimeout` if ms is 0 anyway\n    if (ms === 0) {\n        return fn;\n    }\n    let timeout;\n    return (arg) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            fn(arg);\n        }, ms);\n    };\n}\nexport function removeProperties(obj, keys) {\n    const clone = Object.assign({}, obj);\n    keys.forEach((key) => {\n        delete clone[key];\n    });\n    return clone;\n}\nexport function splitBySpaces(value) {\n    return value.split(/\\s+/).filter(Boolean);\n}\nexport function normalizeToArray(value) {\n    return [].concat(value);\n}\nexport function pushIfUnique(arr, value) {\n    if (arr.indexOf(value) === -1) {\n        arr.push(value);\n    }\n}\nexport function appendPxIfNumber(value) {\n    return typeof value === 'number' ? `${value}px` : value;\n}\nexport function unique(arr) {\n    return arr.filter((item, index) => arr.indexOf(item) === index);\n}\nexport function getNumber(value) {\n    return typeof value === 'number' ? value : parseFloat(value);\n}\nexport function getBasePlacement(placement) {\n    return placement.split('-')[0];\n}\nexport function arrayFrom(value) {\n    return [].slice.call(value);\n}\nexport function removeUndefinedProps(obj) {\n    return Object.keys(obj).reduce((acc, key) => {\n        if (obj[key] !== undefined) {\n            acc[key] = obj[key];\n        }\n        return acc;\n    }, {});\n}\n","import { arrayFrom, isType, normalizeToArray, getBasePlacement } from './utils';\nexport function div() {\n    return document.createElement('div');\n}\nexport function isElement(value) {\n    return ['Element', 'Fragment'].some((type) => isType(value, type));\n}\nexport function isNodeList(value) {\n    return isType(value, 'NodeList');\n}\nexport function isMouseEvent(value) {\n    return isType(value, 'MouseEvent');\n}\nexport function isReferenceElement(value) {\n    return !!(value && value._tippy && value._tippy.reference === value);\n}\nexport function getArrayOfElements(value) {\n    if (isElement(value)) {\n        return [value];\n    }\n    if (isNodeList(value)) {\n        return arrayFrom(value);\n    }\n    if (Array.isArray(value)) {\n        return value;\n    }\n    return arrayFrom(document.querySelectorAll(value));\n}\nexport function setTransitionDuration(els, value) {\n    els.forEach((el) => {\n        if (el) {\n            el.style.transitionDuration = `${value}ms`;\n        }\n    });\n}\nexport function setVisibilityState(els, state) {\n    els.forEach((el) => {\n        if (el) {\n            el.setAttribute('data-state', state);\n        }\n    });\n}\nexport function getOwnerDocument(elementOrElements) {\n    var _a;\n    const [element] = normalizeToArray(elementOrElements);\n    // Elements created via a <template> have an ownerDocument with no reference to the body\n    return ((_a = element === null || element === void 0 ? void 0 : element.ownerDocument) === null || _a === void 0 ? void 0 : _a.body) ? element.ownerDocument : document;\n}\nexport function isCursorOutsideInteractiveBorder(popperTreeData, event) {\n    const { clientX, clientY } = event;\n    return popperTreeData.every(({ popperRect, popperState, props }) => {\n        const { interactiveBorder } = props;\n        const basePlacement = getBasePlacement(popperState.placement);\n        const offsetData = popperState.modifiersData.offset;\n        if (!offsetData) {\n            return true;\n        }\n        const topDistance = basePlacement === 'bottom' ? offsetData.top.y : 0;\n        const bottomDistance = basePlacement === 'top' ? offsetData.bottom.y : 0;\n        const leftDistance = basePlacement === 'right' ? offsetData.left.x : 0;\n        const rightDistance = basePlacement === 'left' ? offsetData.right.x : 0;\n        const exceedsTop = popperRect.top - clientY + topDistance > interactiveBorder;\n        const exceedsBottom = clientY - popperRect.bottom - bottomDistance > interactiveBorder;\n        const exceedsLeft = popperRect.left - clientX + leftDistance > interactiveBorder;\n        const exceedsRight = clientX - popperRect.right - rightDistance > interactiveBorder;\n        return exceedsTop || exceedsBottom || exceedsLeft || exceedsRight;\n    });\n}\nexport function updateTransitionEndListener(box, action, listener) {\n    const method = `${action}EventListener`;\n    // some browsers apparently support `transition` (unprefixed) but only fire\n    // `webkitTransitionEnd`...\n    ['transitionend', 'webkitTransitionEnd'].forEach((event) => {\n        box[method](event, listener);\n    });\n}\n/**\n * Compared to xxx.contains, this function works for dom structures with shadow\n * dom\n */\nexport function actualContains(parent, child) {\n    var _a, _b;\n    let target = child;\n    while (target) {\n        if (parent.contains(target)) {\n            return true;\n        }\n        target = (_b = (_a = target.getRootNode) === null || _a === void 0 ? void 0 : _a.call(target)) === null || _b === void 0 ? void 0 : _b.host;\n    }\n    return false;\n}\n","import { ARROW_CLASS, BACKDROP_CLASS, BOX_CLASS, CONTENT_CLASS, SVG_ARROW_CLASS, } from './constants';\nimport { div, isElement } from './dom-utils';\nimport { arrayFrom } from './utils';\n// Firefox extensions don't allow .innerHTML = \"...\" property. This tricks it.\nconst innerHTML = () => 'innerHTML';\nfunction dangerouslySetInnerHTML(element, html) {\n    element[innerHTML()] = html;\n}\nfunction createArrowElement(value) {\n    const arrow = div();\n    if (value === true) {\n        arrow.className = ARROW_CLASS;\n    }\n    else {\n        arrow.className = SVG_ARROW_CLASS;\n        if (isElement(value)) {\n            arrow.appendChild(value);\n        }\n        else {\n            dangerouslySetInnerHTML(arrow, value);\n        }\n    }\n    return arrow;\n}\nexport function setContent(content, props) {\n    if (isElement(props.content)) {\n        dangerouslySetInnerHTML(content, '');\n        content.appendChild(props.content);\n    }\n    else if (typeof props.content !== 'function') {\n        if (props.allowHTML) {\n            dangerouslySetInnerHTML(content, props.content);\n        }\n        else {\n            content.textContent = props.content;\n        }\n    }\n}\nexport function getChildren(popper) {\n    const box = popper.firstElementChild;\n    const boxChildren = arrayFrom(box.children);\n    return {\n        box,\n        content: boxChildren.find((node) => node.classList.contains(CONTENT_CLASS)),\n        arrow: boxChildren.find((node) => node.classList.contains(ARROW_CLASS) ||\n            node.classList.contains(SVG_ARROW_CLASS)),\n        backdrop: boxChildren.find((node) => node.classList.contains(BACKDROP_CLASS)),\n    };\n}\nexport function render(instance) {\n    const popper = div();\n    const box = div();\n    box.className = BOX_CLASS;\n    box.setAttribute('data-state', 'hidden');\n    box.setAttribute('tabindex', '-1');\n    const content = div();\n    content.className = CONTENT_CLASS;\n    content.setAttribute('data-state', 'hidden');\n    setContent(content, instance.props);\n    popper.appendChild(box);\n    box.appendChild(content);\n    onUpdate(instance.props, instance.props);\n    function onUpdate(prevProps, nextProps) {\n        const { box, content, arrow } = getChildren(popper);\n        if (nextProps.theme) {\n            box.setAttribute('data-theme', nextProps.theme);\n        }\n        else {\n            box.removeAttribute('data-theme');\n        }\n        if (typeof nextProps.animation === 'string') {\n            box.setAttribute('data-animation', nextProps.animation);\n        }\n        else {\n            box.removeAttribute('data-animation');\n        }\n        if (nextProps.inertia) {\n            box.setAttribute('data-inertia', '');\n        }\n        else {\n            box.removeAttribute('data-inertia');\n        }\n        box.style.maxWidth =\n            typeof nextProps.maxWidth === 'number'\n                ? `${nextProps.maxWidth}px`\n                : nextProps.maxWidth;\n        if (nextProps.role) {\n            box.setAttribute('role', nextProps.role);\n        }\n        else {\n            box.removeAttribute('role');\n        }\n        if (prevProps.content !== nextProps.content ||\n            prevProps.allowHTML !== nextProps.allowHTML) {\n            setContent(content, instance.props);\n        }\n        if (nextProps.arrow) {\n            if (!arrow) {\n                box.appendChild(createArrowElement(nextProps.arrow));\n            }\n            else if (prevProps.arrow !== nextProps.arrow) {\n                box.removeChild(arrow);\n                box.appendChild(createArrowElement(nextProps.arrow));\n            }\n        }\n        else if (arrow) {\n            box.removeChild(arrow);\n        }\n    }\n    return {\n        popper,\n        onUpdate,\n    };\n}\n// Runtime check to identify if the render function is the default one; this\n// way we can apply default CSS transitions logic and it can be tree-shaken away\nrender.$$tippy = true;\n"],"names":["BOX_CLASS","CONTENT_CLASS","BACKDROP_CLASS","ARROW_CLASS","SVG_ARROW_CLASS","isType","value","type","str","toString","call","indexOf","arrayFrom","slice","div","document","createElement","isElement","some","innerHTML","dangerouslySetInnerHTML","element","html","createArrowElement","arrow","className","appendChild","setContent","content","props","allowHTML","textContent","getChildren","popper","box","firstElementChild","boxChildren","children","find","node","classList","contains","backdrop","render","instance","setAttribute","onUpdate","prevProps","nextProps","theme","removeAttribute","animation","inertia","style","maxWidth","role","removeChild","$$tippy"],"mappings":"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"}