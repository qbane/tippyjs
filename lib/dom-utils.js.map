{"version":3,"file":"dom-utils.js","sources":["../src-js/utils.js","../src-js/dom-utils.js"],"sourcesContent":["export function hasOwnProperty(obj, key) {\n    return {}.hasOwnProperty.call(obj, key);\n}\nexport function getValueAtIndexOrReturn(value, index, defaultValue) {\n    if (Array.isArray(value)) {\n        const v = value[index];\n        return v == null\n            ? Array.isArray(defaultValue)\n                ? defaultValue[index]\n                : defaultValue\n            : v;\n    }\n    return value;\n}\nexport function isType(value, type) {\n    const str = {}.toString.call(value);\n    return str.indexOf('[object') === 0 && str.indexOf(`${type}]`) > -1;\n}\nexport function invokeWithArgsOrReturn(value, args) {\n    return typeof value === 'function' ? value(...args) : value;\n}\nexport function debounce(fn, ms) {\n    // Avoid wrapping in `setTimeout` if ms is 0 anyway\n    if (ms === 0) {\n        return fn;\n    }\n    let timeout;\n    return (arg) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            fn(arg);\n        }, ms);\n    };\n}\nexport function removeProperties(obj, keys) {\n    const clone = Object.assign({}, obj);\n    keys.forEach((key) => {\n        delete clone[key];\n    });\n    return clone;\n}\nexport function splitBySpaces(value) {\n    return value.split(/\\s+/).filter(Boolean);\n}\nexport function normalizeToArray(value) {\n    return [].concat(value);\n}\nexport function pushIfUnique(arr, value) {\n    if (arr.indexOf(value) === -1) {\n        arr.push(value);\n    }\n}\nexport function appendPxIfNumber(value) {\n    return typeof value === 'number' ? `${value}px` : value;\n}\nexport function unique(arr) {\n    return arr.filter((item, index) => arr.indexOf(item) === index);\n}\nexport function getNumber(value) {\n    return typeof value === 'number' ? value : parseFloat(value);\n}\nexport function getBasePlacement(placement) {\n    return placement.split('-')[0];\n}\nexport function arrayFrom(value) {\n    return [].slice.call(value);\n}\nexport function removeUndefinedProps(obj) {\n    return Object.keys(obj).reduce((acc, key) => {\n        if (obj[key] !== undefined) {\n            acc[key] = obj[key];\n        }\n        return acc;\n    }, {});\n}\n","import { arrayFrom, isType, normalizeToArray, getBasePlacement } from './utils';\nexport function div() {\n    return document.createElement('div');\n}\nexport function isElement(value) {\n    return ['Element', 'Fragment'].some((type) => isType(value, type));\n}\nexport function isNodeList(value) {\n    return isType(value, 'NodeList');\n}\nexport function isMouseEvent(value) {\n    return isType(value, 'MouseEvent');\n}\nexport function isReferenceElement(value) {\n    return !!(value && value._tippy && value._tippy.reference === value);\n}\nexport function getArrayOfElements(value) {\n    if (isElement(value)) {\n        return [value];\n    }\n    if (isNodeList(value)) {\n        return arrayFrom(value);\n    }\n    if (Array.isArray(value)) {\n        return value;\n    }\n    return arrayFrom(document.querySelectorAll(value));\n}\nexport function setTransitionDuration(els, value) {\n    els.forEach((el) => {\n        if (el) {\n            el.style.transitionDuration = `${value}ms`;\n        }\n    });\n}\nexport function setVisibilityState(els, state) {\n    els.forEach((el) => {\n        if (el) {\n            el.setAttribute('data-state', state);\n        }\n    });\n}\nexport function getOwnerDocument(elementOrElements) {\n    var _a;\n    const [element] = normalizeToArray(elementOrElements);\n    // Elements created via a <template> have an ownerDocument with no reference to the body\n    return ((_a = element === null || element === void 0 ? void 0 : element.ownerDocument) === null || _a === void 0 ? void 0 : _a.body) ? element.ownerDocument : document;\n}\nexport function isCursorOutsideInteractiveBorder(popperTreeData, event) {\n    const { clientX, clientY } = event;\n    return popperTreeData.every(({ popperRect, popperState, props }) => {\n        const { interactiveBorder } = props;\n        const basePlacement = getBasePlacement(popperState.placement);\n        const offsetData = popperState.modifiersData.offset;\n        if (!offsetData) {\n            return true;\n        }\n        const topDistance = basePlacement === 'bottom' ? offsetData.top.y : 0;\n        const bottomDistance = basePlacement === 'top' ? offsetData.bottom.y : 0;\n        const leftDistance = basePlacement === 'right' ? offsetData.left.x : 0;\n        const rightDistance = basePlacement === 'left' ? offsetData.right.x : 0;\n        const exceedsTop = popperRect.top - clientY + topDistance > interactiveBorder;\n        const exceedsBottom = clientY - popperRect.bottom - bottomDistance > interactiveBorder;\n        const exceedsLeft = popperRect.left - clientX + leftDistance > interactiveBorder;\n        const exceedsRight = clientX - popperRect.right - rightDistance > interactiveBorder;\n        return exceedsTop || exceedsBottom || exceedsLeft || exceedsRight;\n    });\n}\nexport function updateTransitionEndListener(box, action, listener) {\n    const method = `${action}EventListener`;\n    // some browsers apparently support `transition` (unprefixed) but only fire\n    // `webkitTransitionEnd`...\n    ['transitionend', 'webkitTransitionEnd'].forEach((event) => {\n        box[method](event, listener);\n    });\n}\n/**\n * Compared to xxx.contains, this function works for dom structures with shadow\n * dom\n */\nexport function actualContains(parent, child) {\n    var _a, _b;\n    let target = child;\n    while (target) {\n        if (parent.contains(target)) {\n            return true;\n        }\n        target = (_b = (_a = target.getRootNode) === null || _a === void 0 ? void 0 : _a.call(target)) === null || _b === void 0 ? void 0 : _b.host;\n    }\n    return false;\n}\n"],"names":["isType","value","type","str","toString","call","indexOf","normalizeToArray","concat","getBasePlacement","placement","split","arrayFrom","slice","div","document","createElement","isElement","some","isNodeList","isMouseEvent","isReferenceElement","_tippy","reference","getArrayOfElements","Array","isArray","querySelectorAll","setTransitionDuration","els","forEach","el","style","transitionDuration","setVisibilityState","state","setAttribute","getOwnerDocument","elementOrElements","_a","element","ownerDocument","body","isCursorOutsideInteractiveBorder","popperTreeData","event","clientX","clientY","every","popperRect","popperState","props","interactiveBorder","basePlacement","offsetData","modifiersData","offset","topDistance","top","y","bottomDistance","bottom","leftDistance","left","x","rightDistance","right","exceedsTop","exceedsBottom","exceedsLeft","exceedsRight","updateTransitionEndListener","box","action","listener","method","actualContains","parent","child","_b","target","contains","getRootNode","host"],"mappings":"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"}